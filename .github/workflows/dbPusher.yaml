name: MongoDB Integration
on:
  push:
    branches: [main]

jobs:
  mongodb:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@1af3b93b6815bc44a9784bd300feb67ff0d1eeb3 # v6

      - name: DB pusher
        working-directory: ./.github/actions/db-pusher
        run: |
          npm install
          node app.js
        env:
          MONGODB_URI: ${{secrets.MONGODB_URI}}

      - name: Commit Changes
        uses: EndBug/add-and-commit@a94899bca583c204427a224a7af87c02f9b325d5 # v9
        with:
          author_name: "prompt_bot"
          author_email: actions@github.com
          message: adding unique id to the metadata
          add: promptify/prompts/text2text
